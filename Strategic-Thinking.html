<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategic Thinking Assessment | Chapman University</title>
    <style>
        :root { --chapman-blue: #00205B; --chapman-gold: #C4A000; --gold-light: #F5E6A3; --blue-light: #E8EDF5; --blue-medium: #1A3A7A; --text-primary: #1a1a2e; --text-secondary: #4a4a5a; --white: #ffffff; --vision: #1565C0; --analysis: #2E7D32; --agility: #C62828; --execution: #7B1FA2; --shadow-medium: 0 4px 20px rgba(0, 32, 91, 0.12); --shadow-strong: 0 8px 32px rgba(0, 32, 91, 0.18); }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', -apple-system, sans-serif; line-height: 1.7; color: var(--text-primary); background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); min-height: 100vh; padding: 20px; }
        .container { max-width: 950px; margin: 0 auto; background: var(--white); border-radius: 16px; box-shadow: var(--shadow-strong); overflow: hidden; }
        .header { background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); color: var(--white); padding: 40px 30px; text-align: center; position: relative; }
        .header::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--chapman-gold), var(--gold-light), var(--chapman-gold)); }
        .institution { font-size: 0.95em; letter-spacing: 2px; text-transform: uppercase; opacity: 0.9; margin-bottom: 5px; }
        .college { font-size: 1.1em; color: var(--chapman-gold); margin-bottom: 20px; font-weight: 600; }
        h1 { font-size: 2.4em; font-weight: 700; margin-bottom: 12px; }
        .subtitle { font-size: 1.1em; font-style: italic; color: var(--gold-light); }
        .content { padding: 35px; }
        .hidden { display: none !important; }
        .intro-section { background: linear-gradient(135deg, var(--blue-light), #f8f9fc); border-radius: 14px; padding: 30px; margin-bottom: 30px; border-left: 5px solid var(--chapman-blue); }
        .intro-section h2 { color: var(--chapman-blue); font-size: 1.4em; margin-bottom: 15px; }
        .intro-section p { color: var(--text-secondary); margin-bottom: 15px; }
        .dimensions-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 25px 0; }
        .dim-preview { padding: 20px 12px; border-radius: 12px; text-align: center; color: var(--white); }
        .dim-preview.vision { background: linear-gradient(135deg, var(--vision), #1976D2); }
        .dim-preview.analysis { background: linear-gradient(135deg, var(--analysis), #43A047); }
        .dim-preview.agility { background: linear-gradient(135deg, var(--agility), #D32F2F); }
        .dim-preview.execution { background: linear-gradient(135deg, var(--execution), #9C27B0); }
        .dim-preview .icon { font-size: 1.8em; margin-bottom: 6px; }
        .dim-preview .name { font-weight: 700; font-size: 0.75em; line-height: 1.3; }
        .quote-box { background: linear-gradient(135deg, #fffef8, #fef9e7); border-left: 5px solid var(--chapman-gold); padding: 25px; margin: 25px 0; border-radius: 0 12px 12px 0; }
        .quote-box blockquote { font-style: italic; color: var(--text-secondary); font-size: 1.05em; }
        .quote-box cite { display: block; margin-top: 12px; color: var(--chapman-blue); font-weight: 600; font-style: normal; }
        .assessment-meta { display: flex; gap: 25px; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(0,32,91,0.1); flex-wrap: wrap; }
        .meta-item { display: flex; align-items: center; gap: 8px; color: var(--text-secondary); }
        .meta-icon { width: 28px; height: 28px; background: var(--chapman-blue); color: var(--white); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 0.85em; }
        .student-info { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px; }
        .input-group { display: flex; flex-direction: column; }
        .input-group label { font-weight: 600; margin-bottom: 8px; color: var(--chapman-blue); }
        .input-group input { padding: 14px 16px; border: 2px solid #e1e5eb; border-radius: 10px; font-size: 16px; }
        .input-group input:focus { outline: none; border-color: var(--chapman-blue); }
        .instructions-box { background: linear-gradient(135deg, #fffef8, #fef9e7); border: 2px solid var(--chapman-gold); border-radius: 12px; padding: 25px; margin-bottom: 30px; }
        .instructions-box h3 { color: var(--chapman-blue); margin-bottom: 15px; }
        .scale-display { display: flex; justify-content: space-between; margin-top: 15px; padding: 15px; background: var(--blue-light); border-radius: 10px; }
        .scale-item { text-align: center; flex: 1; }
        .scale-number { display: inline-block; width: 36px; height: 36px; line-height: 36px; background: var(--chapman-blue); color: var(--white); border-radius: 50%; font-weight: 700; margin-bottom: 5px; }
        .scale-label { font-size: 0.6em; color: var(--text-secondary); }
        .progress-container { margin-bottom: 25px; }
        .progress-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9em; color: var(--text-secondary); }
        .progress-bar { width: 100%; height: 10px; background: #e8ecf0; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--chapman-blue), var(--chapman-gold)); width: 0%; transition: width 0.5s ease; }
        .question-container { background: var(--white); border-radius: 14px; border: 2px solid #e8ecf0; padding: 25px; margin-bottom: 18px; transition: all 0.3s ease; }
        .question-container:hover { border-color: var(--chapman-blue); box-shadow: var(--shadow-medium); }
        .question-container.answered { border-color: var(--chapman-gold); background: linear-gradient(135deg, #fffef8, var(--white)); }
        .question-text { font-size: 1.02em; color: var(--text-primary); margin-bottom: 18px; }
        .question-number { color: var(--chapman-blue); font-weight: 700; margin-right: 8px; }
        .likert-scale { display: flex; justify-content: space-between; gap: 6px; }
        .likert-option { flex: 1; text-align: center; }
        .likert-option input[type="radio"] { display: none; }
        .likert-option label { display: flex; flex-direction: column; align-items: center; padding: 12px 6px; border: 2px solid #e8ecf0; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; background: #fafbfc; }
        .likert-option label:hover { border-color: var(--chapman-blue); background: var(--blue-light); }
        .likert-option input[type="radio"]:checked + label { border-color: var(--chapman-blue); background: var(--chapman-blue); color: var(--white); }
        .likert-number { font-size: 1.2em; font-weight: 700; margin-bottom: 2px; }
        .likert-label { font-size: 0.55em; text-transform: uppercase; }
        .controls { text-align: center; margin: 30px 0; }
        .btn { border: none; padding: 16px 40px; font-size: 1.05em; font-weight: 600; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; margin: 8px; }
        .btn-primary { background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); color: var(--white); }
        .btn-primary:hover:not(:disabled) { transform: translateY(-3px); }
        .btn-secondary { background: linear-gradient(135deg, var(--chapman-gold), #d4b000); color: var(--chapman-blue); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-outline { background: transparent; border: 2px solid var(--chapman-blue); color: var(--chapman-blue); }
        .results { display: none; margin-top: 30px; }
        .results-header { background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); color: var(--white); padding: 40px; text-align: center; border-radius: 16px 16px 0 0; }
        .results-header h2 { font-size: 1.8em; margin-bottom: 10px; }
        .results-header .student-name { font-size: 1.3em; color: var(--chapman-gold); margin-bottom: 8px; }
        .overall-score { background: linear-gradient(135deg, #34495e, #2c3e50); padding: 40px; text-align: center; }
        .score-circle { width: 160px; height: 160px; border-radius: 50%; background: conic-gradient(var(--chapman-gold) var(--pct), rgba(255,255,255,0.2) 0); display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; }
        .score-inner { width: 130px; height: 130px; border-radius: 50%; background: #2c3e50; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--white); }
        .score-inner .score { font-size: 2.8em; font-weight: 700; line-height: 1; }
        .score-inner .label { font-size: 0.85em; opacity: 0.9; }
        .level-name { color: var(--chapman-gold); font-size: 1.4em; font-weight: 700; margin-bottom: 10px; }
        .level-desc { color: rgba(255,255,255,0.85); font-size: 0.95em; max-width: 600px; margin: 0 auto; }
        .dim-scores { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 25px; background: linear-gradient(135deg, #3a5068, #2c3e50); }
        .dim-score-card { background: rgba(255,255,255,0.1); padding: 20px 15px; border-radius: 14px; text-align: center; color: var(--white); }
        .dim-score-card.highest { box-shadow: 0 0 0 3px var(--chapman-gold); }
        .dim-score-card.lowest { border: 2px dashed rgba(255,255,255,0.4); }
        .dim-score-card .icon { font-size: 1.6em; margin-bottom: 6px; }
        .dim-score-card .name { font-size: 0.7em; margin-bottom: 8px; opacity: 0.9; }
        .dim-score-card .score { font-size: 2em; font-weight: 700; }
        .dim-score-card .max { font-size: 0.7em; opacity: 0.7; }
        .results-body { background: var(--blue-light); padding: 35px; border-radius: 0 0 16px 16px; }
        .result-section { background: var(--white); border-radius: 14px; padding: 28px; margin-bottom: 20px; border-left: 5px solid var(--chapman-blue); }
        .result-section.gold-accent { border-left-color: var(--chapman-gold); }
        .result-section h4 { color: var(--chapman-blue); margin-bottom: 18px; }
        .dim-detail { padding: 20px; border-radius: 12px; margin-bottom: 15px; }
        .dim-detail.vision { background: rgba(21,101,192,0.08); border-left: 4px solid var(--vision); }
        .dim-detail.analysis { background: rgba(46,125,50,0.08); border-left: 4px solid var(--analysis); }
        .dim-detail.agility { background: rgba(198,40,40,0.08); border-left: 4px solid var(--agility); }
        .dim-detail.execution { background: rgba(123,31,162,0.08); border-left: 4px solid var(--execution); }
        .dim-detail h5 { margin-bottom: 8px; }
        .dim-detail p { font-size: 0.9em; color: var(--text-secondary); margin-bottom: 10px; }
        .dim-detail ul { list-style: none; padding: 0; }
        .dim-detail li { padding: 5px 0 5px 20px; position: relative; font-size: 0.85em; color: var(--text-secondary); }
        .dim-detail li::before { content: '‚Üí'; position: absolute; left: 0; }
        .reflection-section { background: linear-gradient(135deg, var(--blue-light), #f0f4fa); border-radius: 14px; padding: 30px; margin-top: 25px; border: 2px solid var(--chapman-blue); }
        .reflection-section h4 { color: var(--chapman-blue); margin-bottom: 20px; text-align: center; }
        .reflection-questions { counter-reset: reflection; }
        .reflection-question { padding: 18px 20px 18px 50px; position: relative; background: var(--white); border-radius: 10px; margin-bottom: 12px; color: var(--text-secondary); }
        .reflection-question::before { counter-increment: reflection; content: counter(reflection); position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 26px; height: 26px; background: var(--chapman-blue); color: var(--white); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.85em; font-weight: 700; }
        .footer { text-align: center; padding: 25px; color: var(--text-secondary); font-size: 0.9em; border-top: 1px solid #e8ecf0; margin-top: 30px; }
        @media (max-width: 768px) { .dimensions-grid, .dim-scores { grid-template-columns: repeat(2, 1fr); } .student-info { grid-template-columns: 1fr; } h1 { font-size: 1.8em; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="institution">Chapman University</div>
            <div class="college">Argyros College of Business and Economics</div>
            <h1>Strategic Thinking Assessment</h1>
            <div class="subtitle">Based on Mintzberg & Porter's Strategic Management Frameworks</div>
        </div>
        <div class="content">
            <div id="intro-section">
                <div class="intro-section">
                    <h2>‚ôüÔ∏è How Strategic Is Your Thinking?</h2>
                    <p><strong>Strategic thinking</strong> is the ability to see the big picture, anticipate future trends, and align actions with long-term objectives. It's what separates managers from leaders.</p>
                    <p>Strategic thinkers combine <strong>visionary foresight</strong>, <strong>analytical rigor</strong>, <strong>adaptive agility</strong>, and <strong>disciplined execution</strong>.</p>
                    <div class="dimensions-grid">
                        <div class="dim-preview vision"><div class="icon">üî≠</div><div class="name">Visionary Foresight</div></div>
                        <div class="dim-preview analysis"><div class="icon">üìä</div><div class="name">Analytical Rigor</div></div>
                        <div class="dim-preview agility"><div class="icon">üîÑ</div><div class="name">Adaptive Agility</div></div>
                        <div class="dim-preview execution"><div class="icon">üéØ</div><div class="name">Strategic Execution</div></div>
                    </div>
                    <div class="quote-box">
                        <blockquote>"The essence of strategy is choosing what not to do."</blockquote>
                        <cite>‚Äî Michael Porter, Harvard Business School</cite>
                    </div>
                    <div class="assessment-meta">
                        <div class="meta-item"><div class="meta-icon">‚è±</div><span>6-8 minutes</span></div>
                        <div class="meta-item"><div class="meta-icon">üìù</div><span>20 items</span></div>
                        <div class="meta-item"><div class="meta-icon">‚ôüÔ∏è</div><span>4 dimensions</span></div>
                    </div>
                </div>
                <div class="student-info">
                    <div class="input-group"><label for="studentName">Your Full Name</label><input type="text" id="studentName" placeholder="Enter your full name"></div>
                    <div class="input-group"><label for="testDate">Assessment Date</label><input type="date" id="testDate"></div>
                </div>
                <div class="instructions-box">
                    <h3>üìå Instructions</h3>
                    <p>Rate how accurately each statement describes your typical approach to work and decision-making.</p>
                    <div class="scale-display">
                        <div class="scale-item"><div class="scale-number">1</div><div class="scale-label">Strongly Disagree</div></div>
                        <div class="scale-item"><div class="scale-number">2</div><div class="scale-label">Disagree</div></div>
                        <div class="scale-item"><div class="scale-number">3</div><div class="scale-label">Neutral</div></div>
                        <div class="scale-item"><div class="scale-number">4</div><div class="scale-label">Agree</div></div>
                        <div class="scale-item"><div class="scale-number">5</div><div class="scale-label">Strongly Agree</div></div>
                    </div>
                </div>
                <div class="controls"><button class="btn btn-primary" onclick="startAssessment()">Begin Assessment ‚Üí</button></div>
            </div>
            <div id="assessment-section" class="hidden">
                <div class="progress-container">
                    <div class="progress-label"><span>Progress</span><span id="progressText">0 of 20</span></div>
                    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                </div>
                <div id="questions-container"></div>
                <div class="controls"><button class="btn btn-primary" id="submitBtn" onclick="calculateResults()" disabled>Discover My Strategic Thinking Profile ‚Üí</button></div>
            </div>
            <div id="results" class="results"></div>
            <div id="downloadSection" class="hidden controls">
                <button class="btn btn-secondary" onclick="generatePDF()">üìÑ Download PDF</button>
                <button class="btn btn-outline" onclick="restartAssessment()">Retake</button>
            </div>
        </div>
        <div class="footer">
            <p>Strategic Thinking Assessment ‚Ä¢ Based on Strategic Management Frameworks</p>
            <p>Chapman University ‚Ä¢ Argyros College of Business and Economics</p>
            <p style="margin-top: 8px; font-size: 0.85em;">¬© 2024 Professor Chip Monaco ‚Ä¢ MGMT 316</p>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        const questions = {
            vision: [
                { id: 1, text: "I regularly think about where my organization should be in 5-10 years.", dim: "vision" },
                { id: 2, text: "I can articulate a compelling vision that inspires others.", dim: "vision" },
                { id: 3, text: "I anticipate industry trends before they become obvious.", dim: "vision" },
                { id: 4, text: "I consider how current decisions will affect long-term outcomes.", dim: "vision" },
                { id: 5, text: "I identify emerging opportunities before competitors do.", dim: "vision" }
            ],
            analysis: [
                { id: 6, text: "I gather and analyze data before making important decisions.", dim: "analysis" },
                { id: 7, text: "I systematically assess competitors' strengths and weaknesses.", dim: "analysis" },
                { id: 8, text: "I use frameworks and models to structure my thinking.", dim: "analysis" },
                { id: 9, text: "I identify the root causes of problems, not just symptoms.", dim: "analysis" },
                { id: 10, text: "I consider multiple scenarios when planning.", dim: "analysis" }
            ],
            agility: [
                { id: 11, text: "I quickly adjust my approach when circumstances change.", dim: "agility" },
                { id: 12, text: "I embrace uncertainty as an opportunity rather than a threat.", dim: "agility" },
                { id: 13, text: "I experiment with new approaches rather than sticking to what's worked.", dim: "agility" },
                { id: 14, text: "I can pivot strategy without losing sight of the ultimate goal.", dim: "agility" },
                { id: 15, text: "I stay calm and think clearly in ambiguous situations.", dim: "agility" }
            ],
            execution: [
                { id: 16, text: "I translate strategic goals into concrete action plans.", dim: "execution" },
                { id: 17, text: "I align resources with strategic priorities.", dim: "execution" },
                { id: 18, text: "I make tough trade-offs to focus on what matters most.", dim: "execution" },
                { id: 19, text: "I ensure that daily activities connect to strategic objectives.", dim: "execution" },
                { id: 20, text: "I measure progress and adjust course when needed.", dim: "execution" }
            ]
        };
        const dimensionData = {
            vision: { 
                name: "Visionary Foresight", 
                icon: "üî≠", 
                color: "#1565C0", 
                description: "The ability to envision the future, anticipate trends, and see possibilities before others do.",
                profileSummary: "You see beyond the present to envision future possibilities. You anticipate trends and create compelling visions of what could be.",
                decisionStyle: "Future-oriented and possibility-focused. You evaluate options based on their potential to create desired future states.",
                communicationStyle: "Inspiring and future-focused. You paint pictures of possibilities and help others see beyond current constraints.",
                motivatedBy: "Shaping the future, seeing possibilities before others, creating something new, and inspiring others with vision.",
                stressResponse: "Under pressure, you may retreat into visionary thinking when practical action is needed, or become frustrated when others don't see the future you envision.",
                blindSpots: "May struggle with present realities while focused on future; can lose credibility if visions aren't grounded in execution capability.",
                highBehaviors: ["Thinks in 5-10 year horizons", "Anticipates industry shifts", "Creates compelling futures", "Connects present to future"], 
                development: ["Read about emerging trends", "Practice scenario planning", "Study disruptive innovations", "Talk to futurists and visionaries"],
                swotStrength: "Sees future possibilities and inspires others with vision",
                swotWeakness: "May struggle with present execution demands",
                swotOpportunity: "Pair vision with analytical rigor and execution focus",
                swotThreat: "Risk of losing credibility if visions don't translate to results"
            },
            analysis: { 
                name: "Analytical Rigor", 
                icon: "üìä", 
                color: "#2E7D32", 
                description: "The ability to gather data, apply frameworks, and systematically assess situations before deciding.",
                profileSummary: "You bring rigor and data to strategic decisions. You apply frameworks systematically and base decisions on evidence.",
                decisionStyle: "Data-driven and framework-based. You gather evidence, apply analytical tools, and make decisions based on systematic assessment.",
                communicationStyle: "Structured and evidence-based. You present analysis clearly and use frameworks to help others understand situations.",
                motivatedBy: "Finding the right answer, applying rigorous analysis, making well-informed decisions, and being seen as thorough and credible.",
                stressResponse: "Under pressure, you may over-analyze, delay decisions for more data, or struggle when situations are too ambiguous for clean analysis.",
                blindSpots: "May miss opportunities waiting for perfect data; can over-complicate decisions that need quick action.",
                highBehaviors: ["Uses data to drive decisions", "Applies strategic frameworks", "Conducts competitive analysis", "Identifies root causes"], 
                development: ["Learn strategic frameworks (SWOT, Porter's Five Forces)", "Practice data-driven decision making", "Study competitor strategies", "Develop analytical models"],
                swotStrength: "Rigorous analysis leads to well-informed decisions",
                swotWeakness: "May over-analyze or miss opportunities requiring speed",
                swotOpportunity: "Balance analysis with bias toward action",
                swotThreat: "Risk of analysis paralysis in fast-moving environments"
            },
            agility: { 
                name: "Adaptive Agility", 
                icon: "üîÑ", 
                color: "#C62828", 
                description: "The ability to remain flexible, pivot when necessary, and thrive in uncertain environments.",
                profileSummary: "You adapt quickly to changing circumstances. You embrace uncertainty and pivot without losing direction.",
                decisionStyle: "Flexible and iterative. You make decisions that preserve optionality and adjust course based on feedback.",
                communicationStyle: "Adaptive and experimental. You frame strategies as hypotheses to test and create openness to change.",
                motivatedBy: "Navigating uncertainty, finding new paths forward, experimenting and learning, and thriving where others struggle.",
                stressResponse: "You handle uncertainty well, but may change direction too quickly or struggle when situations require sustained commitment.",
                blindSpots: "May pivot too quickly without giving strategies time to work; can appear inconsistent or lacking conviction.",
                highBehaviors: ["Embraces change and uncertainty", "Experiments and iterates", "Pivots without losing direction", "Stays calm in ambiguity"], 
                development: ["Practice comfort with uncertainty", "Run small experiments", "Build contingency plans", "Study agile methodologies"],
                swotStrength: "Thrives in uncertainty and adapts quickly to change",
                swotWeakness: "May change direction too often or appear inconsistent",
                swotOpportunity: "Balance agility with strategic persistence",
                swotThreat: "Risk of abandoning good strategies too soon"
            },
            execution: { 
                name: "Strategic Execution", 
                icon: "üéØ", 
                color: "#7B1FA2", 
                description: "The ability to translate strategy into action ‚Äî aligning resources, making trade-offs, and driving results.",
                profileSummary: "You translate strategy into results. You align resources, make trade-offs, and drive disciplined execution.",
                decisionStyle: "Results-focused and prioritizing. You make decisions that focus resources on strategic priorities and create accountability.",
                communicationStyle: "Clear and action-oriented. You connect daily work to strategy and create clarity about what matters most.",
                motivatedBy: "Seeing strategies succeed, achieving measurable results, creating accountability, and bridging vision and reality.",
                stressResponse: "Under pressure, you may focus too narrowly on execution and miss strategic shifts, or become frustrated with visionary thinking that lacks plans.",
                blindSpots: "May execute efficiently on wrong strategies; can be so focused on current execution that you miss needed pivots.",
                highBehaviors: ["Creates clear action plans", "Aligns resources to priorities", "Makes difficult trade-offs", "Tracks and measures progress"], 
                development: ["Break strategy into milestones", "Practice saying no to distractions", "Build accountability systems", "Connect daily work to strategy"],
                swotStrength: "Translates strategy into measurable results",
                swotWeakness: "May execute on outdated strategies or miss needed pivots",
                swotOpportunity: "Pair execution focus with strategic sensing",
                swotThreat: "Risk of efficient execution of wrong strategy"
            }
        };
        const levels = [
            { min: 80, max: 100, name: "Strategic Leader", desc: "You think and act strategically ‚Äî combining vision, analysis, agility, and execution at a high level.", swotStrength: "Comprehensive strategic capability across all dimensions", swotWeakness: "May intimidate or outpace less strategic colleagues", swotOpportunity: "Develop and mentor strategic capability in others", swotThreat: "Risk of frustration in environments that don't value strategy" },
            { min: 60, max: 79, name: "Strategic Thinker", desc: "You have strong strategic capabilities with opportunities to deepen specific areas.", swotStrength: "Strong strategic foundation with clear strengths", swotWeakness: "Some strategic dimensions need development", swotOpportunity: "Focus on developing weaker dimensions", swotThreat: "May be limited by underdeveloped dimensions" },
            { min: 40, max: 59, name: "Developing Strategist", desc: "You're building strategic thinking skills. Focus on integrating vision with execution.", swotStrength: "Growing strategic awareness provides foundation", swotWeakness: "Strategic gaps may limit effectiveness", swotOpportunity: "Significant room for strategic development", swotThreat: "May struggle in roles requiring strategic leadership" },
            { min: 20, max: 39, name: "Tactical Thinker", desc: "You tend toward tactical, day-to-day thinking. Strategic capability can be developed.", swotStrength: "Tactical focus delivers in operational roles", swotWeakness: "May miss strategic implications of decisions", swotOpportunity: "Strategic thinking can be learned", swotThreat: "Career advancement may be limited without strategic development" }
        ];
        let responses = {};
        let studentName = '';
        let surveyDate = '';
        
        // Robust auto-date initialization with multiple fallbacks
        function setTodayDate() {
            var dateField = document.getElementById('testDate');
            if (dateField && !dateField.value) {
                dateField.value = new Date().toISOString().split('T')[0];
            }
        }
        setTodayDate();
        document.addEventListener('DOMContentLoaded', setTodayDate);
        window.addEventListener('load', setTodayDate);
        requestAnimationFrame(setTodayDate);
        setTimeout(setTodayDate, 0);
        setTimeout(setTodayDate, 100);
        setTimeout(setTodayDate, 500);
        function startAssessment() {
            studentName = document.getElementById('studentName').value.trim();
            surveyDate = document.getElementById('testDate').value;
            if (!studentName) { alert('Please enter your name.'); return; }
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('assessment-section').classList.remove('hidden');
            renderQuestions();
        }
        function renderQuestions() {
            const container = document.getElementById('questions-container');
            const allQuestions = [...questions.vision, ...questions.analysis, ...questions.agility, ...questions.execution].sort(() => Math.random() - 0.5);
            container.innerHTML = allQuestions.map((q, i) => `
                <div class="question-container" id="q-container-${q.id}">
                    <div class="question-text"><span class="question-number">${i+1}.</span> ${q.text}</div>
                    <div class="likert-scale">
                        ${[1,2,3,4,5].map(val => `
                            <div class="likert-option">
                                <input type="radio" name="q${q.id}" id="q${q.id}_${val}" value="${val}" onchange="handleResponse(${q.id}, ${val}, '${q.dim}')">
                                <label for="q${q.id}_${val}"><span class="likert-number">${val}</span><span class="likert-label">${['Strongly Disagree','Disagree','Neutral','Agree','Strongly Agree'][val-1]}</span></label>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }
        function handleResponse(id, value, dim) {
            responses[id] = { value, dim };
            document.getElementById(`q-container-${id}`).classList.add('answered');
            updateProgress();
        }
        function updateProgress() {
            const answered = Object.keys(responses).length;
            document.getElementById('progressFill').style.width = (answered / 20 * 100) + '%';
            document.getElementById('progressText').textContent = `${answered} of 20`;
            document.getElementById('submitBtn').disabled = answered < 20;
        }
        function calculateResults() {
            const scores = { vision: 0, analysis: 0, agility: 0, execution: 0 };
            Object.values(responses).forEach(r => scores[r.dim] += r.value);
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            displayResults(scores, totalScore);
        }
        function displayResults(scores, totalScore) {
            const level = levels.find(l => totalScore >= l.min && totalScore <= l.max) || levels[3];
            const pct = (totalScore / 100) * 100;
            const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const highestDim = sorted[0][0];
            const lowestDim = sorted[3][0];
            document.getElementById('results').innerHTML = `
                <div class="results-header"><h2>‚ôüÔ∏è Your Strategic Thinking Profile</h2><div class="student-name">${studentName}</div><div class="date">Completed: ${new Date(surveyDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div></div>
                <div class="overall-score">
                    <div class="score-circle" style="--pct: ${pct}%;"><div class="score-inner"><div class="score">${totalScore}</div><div class="label">of 100</div></div></div>
                    <div class="level-name">${level.name}</div>
                    <div class="level-desc">${level.desc}</div>
                </div>
                <div class="dim-scores">
                    ${['vision', 'analysis', 'agility', 'execution'].map(dim => `
                        <div class="dim-score-card ${dim === highestDim ? 'highest' : ''} ${dim === lowestDim ? 'lowest' : ''}">
                            <div class="icon">${dimensionData[dim].icon}</div>
                            <div class="name">${dimensionData[dim].name}</div>
                            <div class="score">${scores[dim]}</div>
                            <div class="max">of 25</div>
                        </div>
                    `).join('')}
                </div>
                <div style="background: linear-gradient(135deg, #1a3a7a 0%, #00205B 100%); color: white; padding: 25px; border-radius: 14px; margin: 20px 0;">
                    <h3 style="color: #C4A000; margin-bottom: 15px; font-size: 1.3em;">üìã Assessment Tracker Summary</h3>
                    <p style="font-size: 0.9em; opacity: 0.9; margin-bottom: 15px;">Copy this code into your Assessment Tracker.</p>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div><div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase;">Strategic Level</div><div style="font-size: 1.4em; font-weight: 700; color: #F5E6A3;">${level.name}</div></div>
                            <div><div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase;">Strongest Dimension</div><div style="font-size: 1.4em; font-weight: 700; color: #F5E6A3;">${dimensionData[highestDim].name}</div></div>
                            <div><div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase;">Total Score</div><div style="font-size: 1.2em; font-weight: 600;">${totalScore} / 100 (${pct}%)</div></div>
                            <div><div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase;">Growth Area</div><div style="font-size: 1.2em; font-weight: 600;">${dimensionData[lowestDim].name}</div></div>
                        </div>
                    </div>
                    <div style="margin-top: 15px; padding: 18px; background: linear-gradient(135deg, rgba(196,160,0,0.25) 0%, rgba(196,160,0,0.15) 100%); border-radius: 10px; border: 1px solid rgba(196,160,0,0.3);">
                        <h4 style="color: #F5E6A3; margin: 0 0 12px 0; font-size: 1em;">üìã Your Results Summary</h4>
                        <div style="font-size: 0.9em; margin-bottom: 10px;">
                            <strong>Strategic Thinking Level:</strong> ${level.name} | <strong>Strongest:</strong> ${dimensionData[highestDim].name} | <strong>Growth Area:</strong> ${dimensionData[lowestDim].name}
                        </div>
                        <div style="font-size: 0.85em; opacity: 0.9; margin-bottom: 10px;">
                            <strong>Dimension Scores:</strong> Vision: ${scores.vision} | Analysis: ${scores.analysis} | Agility: ${scores.agility} | Execution: ${scores.execution}
                        </div>
                        <div style="font-size: 0.75em; opacity: 0.8; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 10px;">
                            <div style="margin-bottom: 6px;"><strong>Your Result:</strong> Strategic Profile: ${level.name} | Strongest: ${dimensionData[highestDim].name} | Score: ${totalScore}</div>
                            <div style="opacity: 0.7;"><span>Tracker Code:</span> <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px;">STA-${highestDim === 'vision' ? 'Vi' : highestDim === 'analysis' ? 'An' : highestDim === 'agility' ? 'Ag' : 'Ex'}-${level.name.includes('Leader') ? 'L' : level.name.includes('Thinker') && !level.name.includes('Tactical') ? 'T' : level.name.includes('Developing') ? 'D' : 'C'}${totalScore}</code></div>
                        </div>
                    </div>
                </div>
                <div class="results-body">
                    <div class="result-section"><h4>üìä Dimension Profile</h4>
                        ${['vision', 'analysis', 'agility', 'execution'].map(dim => `
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 12px;">
                                <span style="width: 150px; font-weight: 600; color: var(--text-secondary); font-size: 0.85em;">${dimensionData[dim].icon} ${dimensionData[dim].name}</span>
                                <div style="flex: 1; height: 26px; background: #e8ecf0; border-radius: 13px; overflow: hidden;">
                                    <div style="height: 100%; width: ${(scores[dim] / 25) * 100}%; background: ${dimensionData[dim].color}; border-radius: 13px; display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: white; font-weight: 600; font-size: 0.8em; min-width: 35px;">${scores[dim]}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="result-section gold-accent"><h4>üí™ Strength: ${dimensionData[highestDim].name}</h4>
                        <div class="dim-detail ${highestDim}"><h5 style="color: ${dimensionData[highestDim].color};">${dimensionData[highestDim].icon} ${dimensionData[highestDim].name}</h5><p>${dimensionData[highestDim].description}</p><p><strong>High Behaviors:</strong></p><ul>${dimensionData[highestDim].highBehaviors.map(b => `<li>${b}</li>`).join('')}</ul></div>
                    </div>
                    <div class="result-section"><h4>üéØ Growth Area: ${dimensionData[lowestDim].name}</h4>
                        <div class="dim-detail ${lowestDim}"><h5 style="color: ${dimensionData[lowestDim].color};">${dimensionData[lowestDim].icon} ${dimensionData[lowestDim].name}</h5><p>${dimensionData[lowestDim].description}</p><p><strong>Development Strategies:</strong></p><ul>${dimensionData[lowestDim].development.map(d => `<li>${d}</li>`).join('')}</ul></div>
                    </div>
                    <div class="result-section gold-accent"><h4>üí° Strategic Thinking Tips</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                            <div style="padding: 12px; background: rgba(21,101,192,0.08); border-radius: 8px; font-size: 0.85em;"><strong>Make time to think</strong> ‚Äî Block strategic thinking time weekly</div>
                            <div style="padding: 12px; background: rgba(46,125,50,0.08); border-radius: 8px; font-size: 0.85em;"><strong>Ask "So what?"</strong> ‚Äî Connect every decision to bigger goals</div>
                            <div style="padding: 12px; background: rgba(198,40,40,0.08); border-radius: 8px; font-size: 0.85em;"><strong>Challenge assumptions</strong> ‚Äî What if everything changed?</div>
                            <div style="padding: 12px; background: rgba(123,31,162,0.08); border-radius: 8px; font-size: 0.85em;"><strong>Learn to say no</strong> ‚Äî Strategy is about trade-offs</div>
                        </div>
                    </div>
                    <div class="reflection-section"><h4>ü§î Reflection Questions</h4><div class="reflection-questions"><div class="reflection-question">Where do you want your career/organization to be in 5 years?</div><div class="reflection-question">What data would change your current strategy?</div><div class="reflection-question">What assumptions are you making that might be wrong?</div><div class="reflection-question">What are you saying "no" to in order to focus?</div></div></div>
                </div>
            `;
            document.getElementById('assessment-section').classList.add('hidden');
            document.getElementById('results').style.display = 'block';
            document.getElementById('downloadSection').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            window.strategicResults = { scores, totalScore, level, highestDim, lowestDim };
        }
        function generatePDF() {
            var jsPDF = window.jspdf.jsPDF;
            var doc = new jsPDF();
            var scores = window.strategicResults.scores;
            var totalScore = window.strategicResults.totalScore;
            var level = window.strategicResults.level;
            var highestDim = window.strategicResults.highestDim;
            var lowestDim = window.strategicResults.lowestDim;
            var maxDimScore = 25;
            var maxTotalScore = 100;

            // Colors
            var chapmanBlue = [0, 32, 91];
            var chapmanGold = [196, 160, 0];
            var textDark = [26, 26, 46];
            var textMuted = [100, 100, 110];
            var greenColor = [46, 125, 50];
            var redColor = [198, 40, 40];
            var blueColor = [21, 101, 192];
            var orangeColor = [230, 81, 0];
            var purpleColor = [123, 31, 162];

            // Tracker code generation
            var dimAbbrev = { vision: 'Vi', analysis: 'An', agility: 'Ag', execution: 'Ex' };
            var levelAbbrev = level.name.includes('Leader') ? 'L' : level.name.includes('Thinker') ? 'T' : level.name.includes('Developing') ? 'D' : 'C';
            var trackerCode = 'STA-' + dimAbbrev[highestDim] + '-' + levelAbbrev + totalScore;

            // Helper function
            function addWrappedText(text, x, startY, maxWidth, lineHeight) {
                var lines = doc.splitTextToSize(text, maxWidth);
                var currentY = startY;
                for (var i = 0; i < lines.length; i++) {
                    if (currentY > 275) { doc.addPage(); currentY = 20; }
                    doc.text(lines[i], x, currentY);
                    currentY += lineHeight;
                }
                return currentY;
            }

            // ===== PAGE 1 =====
            doc.setFillColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.rect(0, 0, 210, 42, 'F');
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text('CHAPMAN UNIVERSITY', 105, 12, { align: 'center' });
            doc.setFontSize(9);
            doc.setTextColor(chapmanGold[0], chapmanGold[1], chapmanGold[2]);
            doc.text('Argyros College of Business and Economics', 105, 18, { align: 'center' });
            doc.setFontSize(15);
            doc.setTextColor(255, 255, 255);
            doc.text('Strategic Thinking Assessment', 105, 28, { align: 'center' });
            doc.setFontSize(9);
            doc.text('Based on Strategic Management Frameworks', 105, 36, { align: 'center' });
            doc.setFillColor(chapmanGold[0], chapmanGold[1], chapmanGold[2]);
            doc.rect(0, 42, 210, 2, 'F');

            var y = 52;
            doc.setFontSize(10);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            doc.text('Student: ' + studentName, 20, y);
            doc.text('Date: ' + new Date(surveyDate).toLocaleDateString(), 140, y);
            y += 10;

            // Level Banner
            doc.setFillColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.roundedRect(20, y, 170, 18, 2, 2, 'F');
            doc.setFontSize(14);
            doc.setTextColor(255, 255, 255);
            doc.text(level.name.toUpperCase() + ': ' + totalScore + '/100', 105, y + 12, { align: 'center' });
            y += 24;

            // Score Box
            doc.setFillColor(245, 247, 250);
            doc.roundedRect(20, y, 170, 22, 2, 2, 'F');
            doc.setFontSize(8);
            doc.setTextColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.text('DIMENSION SCORES (5 questions each, max 25)', 25, y + 6);
            doc.setFontSize(8);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            doc.text('Visionary Foresight: ' + scores.vision, 25, y + 12);
            doc.text('Analytical Rigor: ' + scores.analysis, 85, y + 12);
            doc.text('Adaptive Agility: ' + scores.agility, 25, y + 18);
            doc.text('Strategic Execution: ' + scores.execution, 85, y + 18);
            var pct = Math.round((totalScore / maxTotalScore) * 100);
            doc.text('Overall: ' + pct + '%', 145, y + 15);
            y += 28;

            // Tracker Code Box
            doc.setFillColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.roundedRect(20, y, 170, 16, 2, 2, 'F');
            doc.setFontSize(8);
            doc.setTextColor(255, 255, 255);
            doc.text('Your Result: ' + level.name + ' | Strength: ' + dimensionData[highestDim].name, 105, y + 5, { align: 'center' });
            doc.setFontSize(7);
            doc.text('Tracker Code: ' + trackerCode + '  |  Growth Area: ' + dimensionData[lowestDim].name, 105, y + 12, { align: 'center' });
            y += 16;

            // Level Description
            doc.setFontSize(8);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            y = addWrappedText(level.desc, 20, y, 170, 4);
            y += 5;

            // Strength
            doc.setFontSize(10);
            doc.setTextColor(greenColor[0], greenColor[1], greenColor[2]);
            doc.text('STRENGTH: ' + dimensionData[highestDim].name + ' (' + scores[highestDim] + '/25)', 20, y);
            y += 5;
            doc.setFontSize(8);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            y = addWrappedText(dimensionData[highestDim].description, 20, y, 170, 4);
            y += 3;
            doc.setTextColor(textMuted[0], textMuted[1], textMuted[2]);
            doc.text('High Behaviors:', 20, y);
            y += 4;
            for (var i = 0; i < Math.min(4, dimensionData[highestDim].highBehaviors.length); i++) {
                doc.text('- ' + dimensionData[highestDim].highBehaviors[i], 25, y);
                y += 4;
            }
            y += 4;

            // Growth Area
            doc.setFontSize(10);
            doc.setTextColor(orangeColor[0], orangeColor[1], orangeColor[2]);
            doc.text('GROWTH AREA: ' + dimensionData[lowestDim].name + ' (' + scores[lowestDim] + '/25)', 20, y);
            y += 5;
            doc.setFontSize(8);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            y = addWrappedText(dimensionData[lowestDim].description, 20, y, 170, 4);
            y += 3;
            doc.setTextColor(textMuted[0], textMuted[1], textMuted[2]);
            doc.text('Development Strategies:', 20, y);
            y += 4;
            for (var i = 0; i < Math.min(4, dimensionData[lowestDim].development.length); i++) {
                doc.text('-> ' + dimensionData[lowestDim].development[i], 25, y);
                y += 4;
            }

            // ===== PAGE 2: SWOT and All Dimensions =====
            doc.addPage();
            y = 20;

            // SWOT Header
            doc.setFillColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.roundedRect(20, y, 170, 10, 2, 2, 'F');
            doc.setFontSize(11);
            doc.setTextColor(255, 255, 255);
            doc.text('SWOT ANALYSIS - Strategic Thinking Profile', 105, y + 7, { align: 'center' });
            y += 18;

            // SWOT Grid
            var boxW = 82;
            var boxH = 26;

            // Strength
            doc.setFillColor(232, 245, 233);
            doc.roundedRect(20, y, boxW, boxH, 2, 2, 'F');
            doc.setDrawColor(greenColor[0], greenColor[1], greenColor[2]);
            doc.setLineWidth(0.5);
            doc.line(20, y, 20, y + boxH);
            doc.setFontSize(9);
            doc.setTextColor(greenColor[0], greenColor[1], greenColor[2]);
            doc.text('STRENGTH', 25, y + 7);
            doc.setFontSize(7);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            var sText = 'Strong ' + dimensionData[highestDim].name.toLowerCase() + ' enables effective strategic contribution';
            var sLines = doc.splitTextToSize(sText, boxW - 10);
            for (var i = 0; i < Math.min(sLines.length, 3); i++) {
                doc.text(sLines[i], 25, y + 12 + (i * 4));
            }

            // Weakness
            doc.setFillColor(255, 235, 238);
            doc.roundedRect(108, y, boxW, boxH, 2, 2, 'F');
            doc.setDrawColor(redColor[0], redColor[1], redColor[2]);
            doc.line(108, y, 108, y + boxH);
            doc.setFontSize(9);
            doc.setTextColor(redColor[0], redColor[1], redColor[2]);
            doc.text('WEAKNESS', 113, y + 7);
            doc.setFontSize(7);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            var wText = 'Lower ' + dimensionData[lowestDim].name.toLowerCase() + ' may limit strategic effectiveness';
            var wLines = doc.splitTextToSize(wText, boxW - 10);
            for (var i = 0; i < Math.min(wLines.length, 3); i++) {
                doc.text(wLines[i], 113, y + 12 + (i * 4));
            }

            y += boxH + 5;

            // Opportunity
            doc.setFillColor(227, 242, 253);
            doc.roundedRect(20, y, boxW, boxH, 2, 2, 'F');
            doc.setDrawColor(blueColor[0], blueColor[1], blueColor[2]);
            doc.line(20, y, 20, y + boxH);
            doc.setFontSize(9);
            doc.setTextColor(blueColor[0], blueColor[1], blueColor[2]);
            doc.text('OPPORTUNITY', 25, y + 7);
            doc.setFontSize(7);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            var oText = 'Develop ' + dimensionData[lowestDim].name.toLowerCase() + ' through deliberate practice';
            var oLines = doc.splitTextToSize(oText, boxW - 10);
            for (var i = 0; i < Math.min(oLines.length, 3); i++) {
                doc.text(oLines[i], 25, y + 12 + (i * 4));
            }

            // Threat
            doc.setFillColor(255, 243, 224);
            doc.roundedRect(108, y, boxW, boxH, 2, 2, 'F');
            doc.setDrawColor(orangeColor[0], orangeColor[1], orangeColor[2]);
            doc.line(108, y, 108, y + boxH);
            doc.setFontSize(9);
            doc.setTextColor(orangeColor[0], orangeColor[1], orangeColor[2]);
            doc.text('THREAT', 113, y + 7);
            doc.setFontSize(7);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            var tText = 'Imbalanced strategic profile may create blind spots in decision-making';
            var tLines = doc.splitTextToSize(tText, boxW - 10);
            for (var i = 0; i < Math.min(tLines.length, 3); i++) {
                doc.text(tLines[i], 113, y + 12 + (i * 4));
            }

            y += boxH + 12;

            // Strategic Thinking Framework
            doc.setFillColor(245, 247, 250);
            doc.roundedRect(20, y, 170, 20, 2, 2, 'F');
            doc.setFontSize(9);
            doc.setTextColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.text('STRATEGIC THINKING FRAMEWORK', 105, y + 6, { align: 'center' });
            doc.setFontSize(7);
            doc.setTextColor(textMuted[0], textMuted[1], textMuted[2]);
            doc.text('Vision (Where?) + Analysis (Why?) + Agility (How to adapt?) + Execution (How to deliver?)', 105, y + 12, { align: 'center' });
            doc.text('Balanced strategic thinking integrates all four dimensions for organizational success', 105, y + 17, { align: 'center' });
            y += 26;

            // All Four Dimensions
            doc.setFontSize(10);
            doc.setTextColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.text('THE FOUR STRATEGIC DIMENSIONS', 20, y);
            y += 7;

            var dims = ['vision', 'analysis', 'agility', 'execution'];
            var dimColors = {
                vision: blueColor,
                analysis: greenColor,
                agility: redColor,
                execution: purpleColor
            };

            for (var d = 0; d < dims.length; d++) {
                var dim = dims[d];
                var dimColor = dimColors[dim];
                var isYours = (dim === highestDim);
                
                if (y > 245) { doc.addPage(); y = 20; }
                
                doc.setFontSize(8);
                doc.setTextColor(dimColor[0], dimColor[1], dimColor[2]);
                doc.text(dimensionData[dim].name + (isYours ? ' (Your Strength)' : '') + ': ' + scores[dim] + '/25', 25, y);
                y += 4;
                doc.setFontSize(7);
                doc.setTextColor(textMuted[0], textMuted[1], textMuted[2]);
                var dimDescLines = doc.splitTextToSize(dimensionData[dim].description, 165);
                doc.text(dimDescLines[0], 25, y);
                y += 5;
            }

            y += 6;

            // Reflection Questions
            doc.setFillColor(chapmanBlue[0], chapmanBlue[1], chapmanBlue[2]);
            doc.roundedRect(20, y, 170, 10, 2, 2, 'F');
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text('REFLECTION QUESTIONS', 105, y + 7, { align: 'center' });
            y += 16;

            var reflectionQs = [
                "Where do you want your career/organization to be in 5 years?",
                "What data would change your current strategy?",
                "What assumptions are you making that might be wrong?",
                "What are you saying 'no' to in order to focus?",
                "How can you develop your weakest strategic dimension?"
            ];
            doc.setFontSize(8);
            doc.setTextColor(textDark[0], textDark[1], textDark[2]);
            for (var i = 0; i < reflectionQs.length; i++) {
                if (y > 275) { doc.addPage(); y = 20; }
                var qLines = doc.splitTextToSize((i + 1) + '. ' + reflectionQs[i], 165);
                for (var j = 0; j < qLines.length; j++) {
                    doc.text(qLines[j], 25, y);
                    y += 4;
                }
                y += 2;
            }

            // Footer on all pages
            var pageCount = doc.internal.getNumberOfPages();
            for (var i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                doc.setFontSize(8);
                doc.setTextColor(textMuted[0], textMuted[1], textMuted[2]);
                doc.text('Page ' + i + ' of ' + pageCount, 105, 287, { align: 'center' });
                doc.text('Chapman University - Argyros College of Business and Economics - MGMT 316', 105, 292, { align: 'center' });
            }

            doc.save('Strategic_Thinking_' + studentName.replace(/\s+/g, '_') + '_' + new Date().toISOString().split('T')[0] + '.pdf');
        }
        function restartAssessment() {
            responses = {};
            document.getElementById('studentName').value = '';
            document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('results').style.display = 'none';
            document.getElementById('assessment-section').classList.add('hidden');
            document.getElementById('downloadSection').classList.add('hidden');
            document.getElementById('intro-section').classList.remove('hidden');
            document.getElementById('progressFill').style.width = '0%';
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
